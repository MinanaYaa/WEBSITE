<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-travel-destination="meizhou">梅州两天一晚旅行攻略</title>
    <!-- 引入Font Awesome图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- 引入公共CSS文件 -->
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="stylesheet" href="../../assets/css/responsive.css">

    <!-- 使用Netlify代理函数加载高德地图API -->
    <script type="text/javascript">
        // 动态加载高德地图API，通过Netlify函数代理
        document.addEventListener('DOMContentLoaded', function () {
            const script = document.createElement('script');
            script.src = '/api/map-api?url=https://webapi.amap.com/maps?v=1.4.15';
            script.onload = function () {
                // 地图API加载完成后的回调
                console.log('高德地图API加载完成');
            };
            script.onerror = function () {
                console.error('高德地图API加载失败，使用本地模拟地图');
            };
            document.head.appendChild(script);
        });
    </script>

    <!-- 引入公共JS文件 -->
    <script src="../../assets/js/main.js"></script>
    <script src="../../assets/js/map.js"></script>

    <!-- 页面特定样式 -->
    <style>
        /* 隐藏子网页中的header */
        header.site-header {
            display: none;
        }

        /* 行程安排样式 */
        .itinerary-day {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background-color: #fafafa;
        }

        .itinerary-day h3 {
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .itinerary-item {
            margin-bottom: 15px;
            padding-left: 25px;
            position: relative;
        }

        .itinerary-item:before {
            content: '•';
            color: #667eea;
            font-size: 1.5rem;
            position: absolute;
            left: 0;
            top: -5px;
        }

        .itinerary-time {
            font-weight: bold;
            color: #333;
            margin-right: 10px;
        }

        /* 景点卡片样式 */
        .attractions-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .attraction-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            background-color: white;
        }

        .attraction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .attraction-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .attraction-info {
            padding: 15px;
        }

        .attraction-info h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .attraction-rating {
            color: #ffc107;
            margin-bottom: 10px;
        }

        .attraction-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        /* 地图容器样式 */
        #mapContainer {
            width: 100%;
            height: 500px;
            border-radius: 8px;
            overflow: hidden;
        }

        /* 模态框样式 */
        #attractionModal {
            z-index: 1000;
        }

        /* 景点详情内容样式 */
        #modalContent img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }

        #modalContent h4 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        #modalContent p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
    </style>
</head>

<body>
    <!-- 头部容器 -->
    <div id="header-container"></div>

    <!-- 导航栏容器 -->
    <div id="navigation-container"></div>

    <main>
        <!-- 封面图 -->
        <section class="relative h-64 md:h-96 rounded-lg overflow-hidden mb-10 bg-gray-100">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end">
                <div class="p-6 text-white">
                    <h2 class="text-3xl md:text-4xl font-bold mb-2">梅州两天一晚旅游</h2>
                    <p class="text-lg opacity-90">探索客家文化，欣赏自然美景</p>
                </div>
            </div>
        </section>

        <!-- 加载旅游数据处理模块 -->
        <script src="../../assets/js/travel-data.js"></script>
        <!-- 加载测试脚本（可选） -->
        <script src="../../assets/js/test-travel-data.js"></script>

        <!-- 天气状况区域 -->
        <section id="weather" class="mb-12">
            <div id="weather-widget-container"></div>
            <script>
                // 加载天气组件并初始化
                document.addEventListener('DOMContentLoaded', function () {
                    // 加载天气组件HTML
                    fetch('../../components/weather-widget.html')
                        .then(response => response.text())
                        .then(data => {
                            const container = document.getElementById('weather-widget-container');
                            container.innerHTML = data;

                            // 加载外部天气脚本
                            function loadWeatherScript() {
                                return new Promise((resolve, reject) => {
                                    const script = document.createElement('script');
                                    script.src = '../../assets/js/weather-widget.js';
                                    script.onload = () => resolve();
                                    script.onerror = () => reject(new Error('天气脚本加载失败'));
                                    document.body.appendChild(script);
                                });
                            }

                            // 等待TravelData模块加载
                            function waitForTravelData(maxAttempts = 10, delay = 500) {
                                return new Promise((resolve, reject) => {
                                    let attempts = 0;
                                    const interval = setInterval(() => {
                                        attempts++;
                                        if (window.TravelData && typeof window.TravelData.getCurrentLocation === 'function') {
                                            clearInterval(interval);
                                            resolve(window.TravelData);
                                        } else if (attempts >= maxAttempts) {
                                            clearInterval(interval);
                                            reject(new Error('TravelData模块加载超时'));
                                        }
                                    }, delay);
                                });
                            }

                            // 执行天气组件初始化流程
                            async function initWeatherComponent() {
                                try {
                                    // 加载天气脚本
                                    await loadWeatherScript();

                                    // 尝试获取TravelData模块和位置信息
                                    let location = { latitude: 24.29, longitude: 116.12 }; // 默认位置：梅州市中心

                                    try {
                                        const travelData = await waitForTravelData();
                                        const userLocation = travelData.getCurrentLocation();
                                        if (userLocation && userLocation.latitude && userLocation.longitude) {
                                            location = userLocation;
                                        } else {
                                            // 使用默认位置
                                        }
                                    } catch (error) {
                                        // 使用默认位置
                                    }

                                    // 等待WeatherWidget模块加载完成并初始化
                                    const widgetInitInterval = setInterval(() => {
                                        if (window.WeatherWidget && typeof window.WeatherWidget.init === 'function') {
                                            clearInterval(widgetInitInterval);
                                            window.WeatherWidget.init(location.latitude, location.longitude);
                                        }
                                    }, 300);

                                    // 设置初始化超时
                                    setTimeout(() => {
                                        clearInterval(widgetInitInterval);
                                    }, 5000);

                                } catch (error) {
                                    container.innerHTML =
                                        '<div class="bg-white p-4 rounded-lg shadow-md">\n' +
                                        '  <p class="text-red-500">天气信息加载失败，请稍后刷新页面重试。</p>\n' +
                                        '</div>';
                                }
                            }

                            // 启动初始化流程
                            initWeatherComponent();
                        })
                        .catch(error => {
                            console.error('加载天气组件HTML失败:', error);
                            document.getElementById('weather-widget-container').innerHTML =
                                '<div class="bg-white p-4 rounded-lg shadow-md">\n' +
                                '  <p class="text-red-500">天气信息加载失败，请稍后刷新页面重试。</p>\n' +
                                '</div>';
                        });
                });
            </script>
        </section>

        <!-- 行程概览 -->
        <section id="overview" class="mb-12">
            <h2 class="text-2xl font-bold mb-6 flex items-center text-blue-600">
                <i class="fa fa-calendar mr-2"></i>行程概览
            </h2>
            <div class="space-y-8">
                <!-- 第一天 -->
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="bg-blue-600 text-white p-4">
                        <h3 class="text-xl font-bold">第一天（8月25日）</h3>
                    </div>
                    <div class="p-6">
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-train"></i>
                                </div>
                                <div>
                                    <p class="font-bold">09:30-11:30 高铁从陆丰到丰顺站</p>
                                    <p class="text-gray-600 mt-1">二等座票价约83元/人，全程约2小时。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-utensils"></i>
                                </div>
                                <div>
                                    <p class="font-bold">12:00-13:00 午餐：丰顺大饭店</p>
                                    <p class="text-gray-600 mt-1">品尝当地特色农家菜，人均约60元。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-tree"></i>
                                </div>
                                <div>
                                    <p class="font-bold">14:00-15:30 龙归寨瀑布（丰顺县）</p>
                                    <p class="text-gray-600 mt-1">门票48元/人，游览约1.5小时，欣赏粤东第一瀑的壮观景色。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-car"></i>
                                </div>
                                <div>
                                    <p class="font-bold">16:00-17:00 顺风车到酒店</p>
                                    <p class="text-gray-600 mt-1">约29元/人。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-hotel"></i>
                                </div>
                                <div>
                                    <p class="font-bold">17:00-18:00 入住酒店</p>
                                    <p class="text-gray-600 mt-1">丽呈睿轩酒店，价格约160元/晚。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-utensils"></i>
                                </div>
                                <div>
                                    <p class="font-bold">18:30-19:30 晚餐：围龙屋</p>
                                    <p class="text-gray-600 mt-1">品尝当地特色农家菜，人均约120元。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-blue-100 rounded-full w-8 h-8 flex items-center justify-center text-blue-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-walking"></i>
                                </div>
                                <div>
                                    <p class="font-bold">19:50-22:30 北街</p>
                                    <p class="text-gray-600 mt-1">漫步历史街区，品尝当地小吃，人均约50元。</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 第二天 -->
                <div class="bg-white rounded-lg shadow-md overflow-hidden">
                    <div class="bg-green-600 text-white p-4">
                        <h3 class="text-xl font-bold">第二天（8月26日）</h3>
                    </div>
                    <div class="p-6">
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <div
                                    class="bg-green-100 rounded-full w-8 h-8 flex items-center justify-center text-green-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-walking"></i>
                                </div>
                                <div>
                                    <p class="font-bold">09:30-11:30 千佛塔→客家博物馆</p>
                                    <p class="text-gray-600 mt-1">免费参观，需要现场预约，了解梅州的佛教文化和客家历史。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-green-100 rounded-full w-8 h-8 flex items-center justify-center text-green-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-utensils"></i>
                                </div>
                                <div>
                                    <p class="font-bold">12:00-13:00 午餐：印象大饭店</p>
                                    <p class="text-gray-600 mt-1">体验正宗客家美食，人均约60元。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-green-100 rounded-full w-8 h-8 flex items-center justify-center text-green-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-walking"></i>
                                </div>
                                <div>
                                    <p class="font-bold">14:00-16:00 泮坑风景区</p>
                                    <p class="text-gray-600 mt-1">免费参观，需提前预约，欣赏自然风光，体验客家文化。</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <div
                                    class="bg-green-100 rounded-full w-8 h-8 flex items-center justify-center text-green-600 mr-3 mt-1 flex-shrink-0">
                                    <i class="fa fa-car"></i>
                                </div>
                                <div>
                                    <p class="font-bold">18:00- 返程</p>
                                    <p class="text-gray-600 mt-1">乘坐高铁从梅州回陆丰，二等座票价约120元/人。</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 景点介绍 -->
        <section id="attractions" class="mb-12">
            <h2 class="text-2xl font-bold mb-6 flex items-center text-blue-600">
                <i class="fa fa-map-marker mr-2"></i>景点介绍
            </h2>
            <div class="attractions-container">
                <!-- 龙归寨瀑布 -->
                <div class="attraction-card">
                    <div class="attraction-image-container">
                        <img class="attraction-image"
                            src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240849703.png" alt="龙归寨瀑布">
                        <div class="attraction-rating">
                            <span class="rating-stars">★★★</span>
                            <span class="rating-score">3.0</span>
                        </div>
                        <div class="attraction-tag">
                            <span>3A景区</span>
                        </div>
                    </div>
                    <div class="attraction-content">
                        <h3 class="attraction-title">龙归寨瀑布</h3>
                        <div class="attraction-meta">
                            <div class="attraction-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>梅州市丰顺县汤坑镇</span>
                            </div>
                            <div class="attraction-category">
                                <span>自然景观</span>
                            </div>
                        </div>
                        <p class="attraction-description">
                            龙归寨瀑布是粤东最大的瀑布，落差约125米，宽约62米，被誉为"粤东第一瀑"。
                        </p>
                        <div class="attraction-info">
                            <div class="info-item">
                                <i class="fas fa-clock"></i>
                                <span>开放时间: 08:00-18:00</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-ticket-alt"></i>
                                <span>门票: ¥48/人</span>
                            </div>
                        </div>
                        <div class="attraction-actions">
                            <button class="attraction-detail-btn">查看详情</button>
                        </div>
                    </div>
                </div>

                <!-- 千佛塔 -->
                <div class="attraction-card">
                    <div class="attraction-image-container">
                        <img class="attraction-image"
                            src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240850009.png" alt="千佛塔">
                        <div class="attraction-rating">
                            <span class="rating-stars">★★★★</span>
                            <span class="rating-score">4.0</span>
                        </div>
                        <div class="attraction-tag">
                            <span>宗教圣地</span>
                        </div>
                    </div>
                    <div class="attraction-content">
                        <h3 class="attraction-title">千佛塔</h3>
                        <div class="attraction-meta">
                            <div class="attraction-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>梅州市梅江区</span>
                            </div>
                            <div class="attraction-category">
                                <span>历史古迹</span>
                            </div>
                        </div>
                        <p class="attraction-description">
                            千佛塔是梅州市著名的佛教圣地，塔内供奉着千尊佛像，历史悠久，建筑精美。
                        </p>
                        <div class="attraction-info">
                            <div class="info-item">
                                <i class="fas fa-clock"></i>
                                <span>开放时间: 08:00-17:30</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-ticket-alt"></i>
                                <span>门票: ¥10/人</span>
                            </div>
                        </div>
                        <div class="attraction-actions">
                            <button class="attraction-detail-btn">查看详情</button>
                        </div>
                    </div>
                </div>

                <!-- 客家博物馆 -->
                <div class="attraction-card">
                    <div class="attraction-image-container">
                        <img class="attraction-image"
                            src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240847611.png" alt="客家博物馆">
                        <div class="attraction-rating">
                            <span class="rating-stars">★★★★</span>
                            <span class="rating-score">4.0</span>
                        </div>
                        <div class="attraction-tag">
                            <span>4A景区</span>
                        </div>
                    </div>
                    <div class="attraction-content">
                        <h3 class="attraction-title">客家博物馆</h3>
                        <div class="attraction-meta">
                            <div class="attraction-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>梅州市梅江区</span>
                            </div>
                            <div class="attraction-category">
                                <span>文化场馆</span>
                            </div>
                        </div>
                        <p class="attraction-description">
                            客家博物馆是了解客家文化的重要窗口，展示了客家民系的历史、文化、艺术和生活习俗。
                        </p>
                        <div class="attraction-info">
                            <div class="info-item">
                                <i class="fas fa-clock"></i>
                                <span>开放时间: 09:00-17:00</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-ticket-alt"></i>
                                <span>门票: 免费</span>
                            </div>
                        </div>
                        <div class="attraction-actions">
                            <button class="attraction-detail-btn">查看详情</button>
                        </div>
                    </div>
                </div>

                <!-- 北街 -->
                <div class="attraction-card">
                    <div class="attraction-image-container">
                        <img class="attraction-image"
                            src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240851312.png" alt="北街">
                        <div class="attraction-rating">
                            <span class="rating-stars">★★★</span>
                            <span class="rating-score">3.0</span>
                        </div>
                        <div class="attraction-tag">
                            <span>历史街区</span>
                        </div>
                    </div>
                    <div class="attraction-content">
                        <h3 class="attraction-title">北街</h3>
                        <div class="attraction-meta">
                            <div class="attraction-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>梅州市梅江区</span>
                            </div>
                            <div class="attraction-category">
                                <span>文化体验</span>
                            </div>
                        </div>
                        <p class="attraction-description">
                            北街是梅州市的历史文化街区，保留了许多传统建筑，有各种特色小店和当地美食。
                        </p>
                        <div class="attraction-info">
                            <div class="info-item">
                                <i class="fas fa-clock"></i>
                                <span>开放时间: 全天</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-ticket-alt"></i>
                                <span>门票: 免费</span>
                            </div>
                        </div>
                        <div class="attraction-actions">
                            <button class="attraction-detail-btn">查看详情</button>
                        </div>
                    </div>
                </div>

                <!-- 泮坑风景区 -->
                <div class="attraction-card">
                    <div class="attraction-image-container">
                        <img class="attraction-image" src="https://picsum.photos/id/1018/800/600" alt="泮坑风景区">
                        <div class="attraction-rating">
                            <span class="rating-stars">★★★★</span>
                            <span class="rating-score">4.0</span>
                        </div>
                        <div class="attraction-tag">
                            <span>4A景区</span>
                        </div>
                    </div>
                    <div class="attraction-content">
                        <h3 class="attraction-title">泮坑风景区</h3>
                        <div class="attraction-meta">
                            <div class="attraction-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>梅州市梅江区</span>
                            </div>
                            <div class="attraction-category">
                                <span>自然景观</span>
                            </div>
                        </div>
                        <p class="attraction-description">
                            泮坑风景区是梅州著名的自然风景区，以山水风光和客家文化为特色，有溪流、湖泊、山林等自然景观。
                        </p>
                        <div class="attraction-info">
                            <div class="info-item">
                                <i class="fas fa-clock"></i>
                                <span>开放时间: 08:00-18:00</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-ticket-alt"></i>
                                <span>门票: 免费</span>
                            </div>
                        </div>
                        <div class="attraction-actions">
                            <button class="attraction-detail-btn">查看详情</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 地图路线 -->
        <section id="map" class="mb-12">
            <h2 class="text-2xl font-bold mb-6 flex items-center text-blue-600">
                <i class="fa fa-map mr-2"></i>地图路线
            </h2>
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                <div class="p-4 bg-gray-100 border-b flex justify-between items-center">
                    <h3 class="font-bold">行程路线图</h3>
                    <a href="https://uri.amap.com/navigation?from=115.81,22.97&to=116.12,24.29&mode=bus" target="_blank"
                        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center">
                        <i class="fa fa-map-o mr-1"></i> 在高德地图打开
                    </a>
                </div>
                <div id="mapContainer" class="w-full h-[500px]"></div>
            </div>
        </section>
    </main>

    <!-- 页脚容器 -->
    <div id="footer-container"></div>

    <!-- 景点详情模态框 -->
    <div id="attractionModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-4 bg-blue-600 text-white flex justify-between items-center sticky top-0">
                <h3 class="text-xl font-bold" id="modalTitle">景点详情</h3>
                <button id="closeModal" class="text-white hover:text-gray-200">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6" id="modalContent">
                <!-- 模态框内容将通过JavaScript动态加载 -->
            </div>
        </div>
    </div>

    <!-- 加载组件的JavaScript -->
    <script>
        // 加载组件
        function loadComponent(id, url) {
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(id).innerHTML = data;
                })
                .catch(error => console.error(`加载组件${url}失败:`, error));
        }

        // 加载所有组件
        document.addEventListener('DOMContentLoaded', function () {
            loadComponent('header-container', '../../components/header.html');
            loadComponent('navigation-container', '../../components/navigation.html');
            loadComponent('footer-container', '../../components/footer.html');
        });

        // 等待页面内容加载完成后执行页面特定的JavaScript
        document.addEventListener('DOMContentLoaded', function () {
            // 景点详情模态框
            const modal = document.getElementById('attractionModal');
            const closeModal = document.getElementById('closeModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');

            // 等待导航组件加载完成后初始化景点详情功能
            setTimeout(() => {
                document.querySelectorAll('.attraction-detail').forEach(button => {
                    button.addEventListener('click', function () {
                        const id = this.getAttribute('data-id');
                        let title, content;

                        switch (id) {
                            case '1':
                                title = '龙归寨瀑布';
                                content = `
                                    <div class="mb-4">
                                        <img src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240849703.png" alt="龙归寨瀑布" class="w-full max-w-full h-48 object-cover object-center mx-auto rounded-lg">
                                    </div>
                                    <h4 class="text-lg font-bold mb-2">景点介绍</h4>
                                    <p class="mb-4">龙归寨瀑布是粤东最大的瀑布，位于梅州市丰顺县汤坑镇，落差约125米，宽约62米，被誉为"粤东第一瀑"。瀑布周围群山环抱，树木葱茏，空气清新，是夏季避暑的好去处。</p>
                                    <h4 class="text-lg font-bold mb-2">开放时间</h4>
                                    <p class="mb-4">08:00-18:00</p>
                                    <h4 class="text-lg font-bold mb-2">门票信息</h4>
                                    <p class="mb-4">成人票48元/人，儿童票25元/人（1.2米-1.4米），1.2米以下儿童免费。</p>
                                    <h4 class="text-lg font-bold mb-2">交通指南</h4>
                                    <p>从梅州城区出发，可乘坐至丰顺县的班车，然后转乘至龙归寨瀑布的公交车或出租车。</p>
                                `;
                                break;
                            case '2':
                                title = '千佛塔';
                                content = `
                                    <div class="mb-4">
                                        <img src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240850009.png" alt="千佛塔" class="w-full max-w-full h-48 object-cover object-center mx-auto rounded-lg">
                                    </div>
                                    <h4 class="text-lg font-bold mb-2">景点介绍</h4>
                                    <p class="mb-4">千佛塔是梅州市著名的佛教圣地，位于梅州市梅江区。该塔始建于唐代，是为了纪念唐僧取经而建，塔内供奉着千尊佛像，每尊佛像都雕刻精美，栩栩如生。塔高九层，登塔远眺，可以俯瞰梅州城区全景。</p>
                                    <h4 class="text-lg font-bold mb-2">开放时间</h4>
                                    <p class="mb-4">08:00-17:30</p>
                                    <h4 class="text-lg font-bold mb-2">门票信息</h4>
                                    <p class="mb-4">成人票10元/人，学生票5元/人（凭学生证），1.2米以下儿童免费。</p>
                                    <h4 class="text-lg font-bold mb-2">交通指南</h4>
                                    <p>可乘坐梅州城区公交车在千佛塔站下车，或乘坐出租车直达。</p>
                                `;
                                break;
                            case '3':
                                title = '客家博物馆';
                                content = `
                                    <div class="mb-4">
                                        <img src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240847611.png" alt="客家博物馆" class="w-full max-w-full h-48 object-cover object-center mx-auto rounded-lg">
                                    </div>
                                    <h4 class="text-lg font-bold mb-2">景点介绍</h4>
                                    <p class="mb-4">客家博物馆是了解客家文化的重要窗口，位于梅州市梅江区。博物馆展示了客家民系的历史、文化、艺术和生活习俗，包括客家先民的迁徙历史、客家建筑、客家民俗、客家艺术等方面的内容。通过参观，可以深入了解客家文化的独特魅力。</p>
                                    <h4 class="text-lg font-bold mb-2">开放时间</h4>
                                    <p class="mb-4">09:00-17:00（周一闭馆，法定节假日除外）</p>
                                    <h4 class="text-lg font-bold mb-2">门票信息</h4>
                                    <p class="mb-4">免费参观，需携带有效身份证件登记。</p>
                                    <h4 class="text-lg font-bold mb-2">交通指南</h4>
                                    <p>可乘坐梅州城区公交车在客家博物馆站下车，或乘坐出租车直达。</p>
                                `;
                                break;
                            case '4':
                                title = '北街';
                                content = `
                                    <div class="mb-4">
                                        <img src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202508240851312.png" alt="北街" class="w-full max-w-full h-48 object-cover object-center mx-auto rounded-lg">
                                    </div>
                                    <h4 class="text-lg font-bold mb-2">景点介绍</h4>
                                    <p class="mb-4">北街是梅州市的历史文化街区，位于梅州市梅江区。这里保留了许多传统建筑，包括骑楼、祠堂、庙宇等，展现了梅州的历史风貌。街区内有各种特色小店、手工艺品店和当地美食店，可以品尝到正宗的客家美食，购买到特色的客家手工艺品。</p>
                                    <h4 class="text-lg font-bold mb-2">开放时间</h4>
                                    <p class="mb-4">全天开放</p>
                                    <h4 class="text-lg font-bold mb-2">门票信息</h4>
                                    <p class="mb-4">免费参观</p>
                                    <h4 class="text-lg font-bold mb-2">交通指南</h4>
                                    <p>可乘坐梅州城区公交车在北街站下车，或乘坐出租车直达。</p>
                                `;
                                break;
                            case '5':
                                title = '泮坑风景区';
                                content = `
                                    <div class="mb-4">
                                        <img src="https://cdn.jsdelivr.net/gh/13071558875/Photo/Photo/202509010357435.png" alt="泮坑风景区" class="w-full max-w-full h-48 object-cover object-center mx-auto rounded-lg">
                                    </div>
                                    <h4 class="text-lg font-bold mb-2">景点介绍</h4>
                                    <p class="mb-4">泮坑风景区位于梅州市梅江区三角镇，是梅州著名的自然风景区。景区内有溪流、湖泊、山林等自然景观，还有客家特色的建筑和文化元素。游客可以在此欣赏自然风光，体验客家文化，是休闲度假的好去处。</p>
                                    <h4 class="text-lg font-bold mb-2">开放时间</h4>
                                    <p class="mb-4">08:00-17:30</p>
                                    <h4 class="text-lg font-bold mb-2">门票信息</h4>
                                    <p class="mb-4">免费参观</p>
                                    <h4 class="text-lg font-bold mb-2">交通指南</h4>
                                    <p>可乘坐梅州城区公交车在泮坑风景区站下车，或乘坐出租车直达。从梅州城区出发，车程约20分钟。</p>
                                `;
                                break;
                        }

                        modalTitle.textContent = title;
                        modalContent.innerHTML = content;
                        modal.classList.remove('hidden');
                    });
                });

                // 关闭模态框功能
                if (closeModal) {
                    closeModal.addEventListener('click', function () {
                        modal.classList.add('hidden');
                    });
                }

                // 点击模态框外部关闭
                modal.addEventListener('click', function (e) {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            }, 500); // 延迟执行，确保组件已加载

            // 地图初始化 - 优化地图加载逻辑
            window.onload = function () {
                // 初始化地图
                if (window.TravelMap && window.TravelMap.initMap) {
                    // 确保地图容器存在
                    const mapContainer = document.getElementById('mapContainer');
                    if (mapContainer) {
                        // 初始化地图
                        const map = window.TravelMap.initMap('mapContainer', {
                            zoom: 10,
                            center: [116.12, 24.29], // 梅州市中心坐标
                            viewMode: '3D'
                        });

                        // 景点数据 - 使用正确的格式
                        const attractions = [
                            { name: '陆丰站', lng: 115.733297, lat: 22.947809, type: 'station', color: '#FF6B6B' },
                            { name: '丰顺站', lng: 116.190474, lat: 23.751125, type: 'station', color: '#FF6B6B' },
                            { name: '龙归寨瀑布', lng: 116.279318, lat: 23.804617, type: 'attraction', color: '#4ECDC4' },
                            { name: '老街', lng: 116.115125, lat: 24.308796, type: 'attraction', color: '#FFD166' },
                            { name: '丽呈睿轩酒店', lng: 116.135768, lat: 24.273319, type: 'hotel', color: '#06D6A0' },
                            { name: '千佛塔', lng: 116.141917, lat: 24.305451, type: 'attraction', color: '#45B7D1' },
                            { name: '客家博物馆', lng: 116.131916, lat: 24.310328, type: 'attraction', color: '#96CEB4' },
                            { name: '泮坑风景区', lng: 116.139797, lat: 24.245021, type: 'attraction', color: '#FF9F43' },
                            { name: '梅州西站', lng: 116.04774, lat: 24.249938, type: 'attraction', color: '#FF9F43' }
                        ];

                        // 添加景点标记
                        const markers = window.TravelMap.addAttractionMarkers(map, attractions);

                        // 绘制路线
                        // 第一天路线: 陆丰站 -> 丰顺站 -> 龙归寨瀑布 -> 丽呈睿轩酒店
                        const day1Route = [
                            { lng: 115.733297, lat: 22.947809 }, // 陆丰站
                            { lng: 116.190474, lat: 23.751125 }, // 丰顺站
                            { lng: 116.279318, lat: 23.804617 }, // 龙归寨瀑布
                            { lng: 116.115125, lat: 24.308796 }, // 老街
                            { lng: 116.135768, lat: 24.273319 }  // 丽呈睿轩酒店
                        ];

                        // 第二天路线: 丽呈睿轩酒店 -> 千佛塔 -> 客家博物馆 -> 泮坑风景区 -> 梅州西站
                        const day2Route = [
                            { lng: 116.135768, lat: 24.273319 }, // 丽呈睿轩酒店
                            { lng: 116.141917, lat: 24.305451 }, // 千佛塔
                            { lng: 116.131916, lat: 24.310328 }, // 客家博物馆
                            { lng: 116.139797, lat: 24.245021 }, // 泮坑风景区
                            { lng: 116.04774, lat: 24.249938 }  // 梅州西站（返程）
                        ];

                        // 存储所有路线
                        const polylines = [];

                        // 添加第一天路线
                        const day1Polyline = window.TravelMap.drawRoute(map, day1Route, {
                            strokeColor: '#165DFF', // 蓝色
                            strokeWeight: 5,
                            strokeStyle: 'solid',
                            zIndex: 50
                        });
                        polylines.push(day1Polyline);

                        // 添加第二天路线
                        const day2Polyline = window.TravelMap.drawRoute(map, day2Route, {
                            strokeColor: '#36D399', // 绿色
                            strokeWeight: 5,
                            strokeStyle: 'solid',
                            zIndex: 50
                        });
                        polylines.push(day2Polyline);

                        // 调整地图视野，确保能看到所有路线和标记
                        setTimeout(() => {
                            window.TravelMap.fitMapView(map, markers, polylines);
                        }, 1000);

                        console.log('地图初始化成功，已添加景点标记和路线');
                    } else {
                        console.error('地图容器未找到');
                    }
                } else {
                    console.error('地图模块未正确加载');
                    // 尝试重新加载地图模块
                    const mapScript = document.createElement('script');
                    mapScript.src = '../../assets/js/map.js';
                    mapScript.onload = function () {
                        console.log('地图模块重新加载成功');
                    };
                    document.head.appendChild(mapScript);
                }
            };
        });
    </script>



    <!-- 加载页脚 -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 加载页脚
            fetch('../../components/footer.html')
                .then(response => response.text())
                .then(data => {
                    const footerContainer = document.getElementById('footer-container');
                    if (footerContainer) {
                        footerContainer.innerHTML = data;
                    }
                })
                .catch(error => console.error('加载页脚失败:', error));

            // 等待所有组件加载完成后绑定旅游数据
            setTimeout(function () {
                if (window.TravelData && window.TravelData.bindToAllElements) {
                    window.TravelData.bindToAllElements();
                }
            }, 1500);
        });
    </script>

</body>

</html>