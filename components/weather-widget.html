<!-- 天气小部件组件 -->
<div class="weather-widget">
    <div class="weather-header">
        <h3 class="weather-title">目的地天气</h3>
        <div class="weather-location-selector">
            <select id="weather-location">
                <option value="meizhou">梅州</option>
                <option value="suzhou">苏州</option>
                <option value="chengdu">成都</option>
                <option value="beijing">北京</option>
                <option value="shanghai">上海</option>
            </select>
        </div>
    </div>
    
    <div class="weather-content">
        <div class="weather-main">
            <div class="weather-icon">
                <i class="fas fa-cloud-sun"></i>
            </div>
            <div class="weather-info">
                <div class="weather-temp">25°C</div>
                <div class="weather-desc">晴朗</div>
            </div>
        </div>
        
        <div class="weather-details">
            <div class="weather-detail-item">
                <span class="weather-detail-label">湿度</span>
                <span class="weather-detail-value">65%</span>
            </div>
            <div class="weather-detail-item">
                <span class="weather-detail-label">风速</span>
                <span class="weather-detail-value">3.5 m/s</span>
            </div>
            <div class="weather-detail-item">
                <span class="weather-detail-label">气压</span>
                <span class="weather-detail-value">1013 hPa</span>
            </div>
            <div class="weather-detail-item">
                <span class="weather-detail-label">能见度</span>
                <span class="weather-detail-value">10 km</span>
            </div>
        </div>
        
        <div class="weather-forecast">
            <div class="forecast-day">
                <span class="forecast-date">今天</span>
                <span class="forecast-icon"><i class="fas fa-sun"></i></span>
                <span class="forecast-temp">25°C</span>
            </div>
            <div class="forecast-day">
                <span class="forecast-date">明天</span>
                <span class="forecast-icon"><i class="fas fa-cloud"></i></span>
                <span class="forecast-temp">23°C</span>
            </div>
            <div class="forecast-day">
                <span class="forecast-date">后天</span>
                <span class="forecast-icon"><i class="fas fa-cloud-sun-rain"></i></span>
                <span class="forecast-temp">22°C</span>
            </div>
        </div>
    </div>
</div>

<style scoped>
    /* 天气小部件样式 */
    .weather-widget {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 10px;
        padding: 20px;
        color: white;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        margin: 0 auto;
    }
    
    .weather-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    
    .weather-title {
        margin: 0;
        font-size: 1.2rem;
        font-weight: 600;
    }
    
    .weather-location-selector select {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 5px;
        padding: 5px 10px;
        color: white;
        font-size: 0.9rem;
        cursor: pointer;
    }
    
    .weather-location-selector select option {
        background-color: #667eea;
        color: white;
    }
    
    .weather-content {
        text-align: center;
    }
    
    .weather-main {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
    }
    
    .weather-icon {
        font-size: 4rem;
        margin-right: 20px;
        opacity: 0.9;
    }
    
    .weather-info {
        text-align: left;
    }
    
    .weather-temp {
        font-size: 2.5rem;
        font-weight: 300;
        margin-bottom: 5px;
    }
    
    .weather-desc {
        font-size: 1rem;
        opacity: 0.9;
    }
    
    .weather-details {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-bottom: 20px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
    }
    
    .weather-detail-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.9rem;
    }
    
    .weather-detail-label {
        opacity: 0.8;
    }
    
    .weather-detail-value {
        font-weight: 500;
    }
    
    .weather-forecast {
        display: flex;
        justify-content: space-between;
        gap: 10px;
    }
    
    .forecast-day {
        flex: 1;
        padding: 10px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        transition: background-color 0.3s ease;
    }
    
    .forecast-day:hover {
        background: rgba(255, 255, 255, 0.2);
    }
    
    .forecast-date {
        display: block;
        font-size: 0.8rem;
        opacity: 0.8;
        margin-bottom: 5px;
    }
    
    .forecast-icon {
        display: block;
        font-size: 1.5rem;
        margin: 8px 0;
    }
    
    .forecast-temp {
        display: block;
        font-size: 0.9rem;
        font-weight: 500;
    }
    
    /* 响应式设计 */
    @media (max-width: 767px) {
        .weather-widget {
            padding: 15px;
        }
        
        .weather-header {
            flex-direction: column;
            gap: 10px;
        }
        
        .weather-main {
            flex-direction: column;
        }
        
        .weather-icon {
            margin-right: 0;
            margin-bottom: 15px;
            font-size: 3rem;
        }
        
        .weather-info {
            text-align: center;
        }
        
        .weather-details {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .weather-forecast {
            flex-direction: column;
        }
    }
    
    /* Font Awesome 图标样式替代 */
    .fas {
        font-family: 'Arial', sans-serif;
        font-weight: bold;
    }
    
    .fas.fa-cloud-sun:before { content: '☁️☀️'; }
    .fas.fa-sun:before { content: '☀️'; }
    .fas.fa-cloud:before { content: '☁️'; }
    .fas.fa-cloud-sun-rain:before { content: '🌦️'; }
</style>

<script>
    // 天气小部件JavaScript功能
    document.addEventListener('DOMContentLoaded', function() {
        // 初始化天气小部件
        initWeatherWidget();
        
        // 绑定位置选择事件
        bindLocationChange();
        
        // 添加动画效果
        addWeatherAnimation();
    });
    
    /**
     * 初始化天气小部件
     */
    function initWeatherWidget() {
        console.log('天气小部件已初始化');
        
        // 模拟获取当前位置的天气数据
        const defaultLocation = document.getElementById('weather-location').value;
        updateWeatherData(defaultLocation);
    }
    
    /**
     * 绑定位置变化事件
     */
    function bindLocationChange() {
        const locationSelect = document.getElementById('weather-location');
        if (locationSelect) {
            locationSelect.addEventListener('change', function() {
                const location = this.value;
                updateWeatherData(location);
            });
        }
    }
    
    /**
     * 更新天气数据
     * @param {string} location - 位置名称
     */
    function updateWeatherData(location) {
        // 模拟天气数据（实际项目中应从天气API获取）
        const weatherData = getMockWeatherData(location);
        
        // 更新UI
        updateWeatherUI(weatherData);
        
        // 添加加载动画
        const widget = document.querySelector('.weather-widget');
        widget.style.opacity = '0.8';
        
        setTimeout(() => {
            widget.style.opacity = '1';
        }, 300);
    }
    
    /**
     * 获取模拟天气数据
     * @param {string} location - 位置名称
     * @returns {Object} 天气数据对象
     */
    function getMockWeatherData(location) {
        const weatherDatabase = {
            'meizhou': {
                temp: '25°C',
                desc: '晴朗',
                icon: 'fa-sun',
                humidity: '65%',
                windSpeed: '3.5 m/s',
                pressure: '1013 hPa',
                visibility: '10 km',
                forecast: [
                    { date: '今天', icon: 'fa-sun', temp: '25°C' },
                    { date: '明天', icon: 'fa-cloud', temp: '23°C' },
                    { date: '后天', icon: 'fa-cloud-sun-rain', temp: '22°C' }
                ]
            },
            'suzhou': {
                temp: '23°C',
                desc: '多云',
                icon: 'fa-cloud',
                humidity: '70%',
                windSpeed: '2.8 m/s',
                pressure: '1015 hPa',
                visibility: '8 km',
                forecast: [
                    { date: '今天', icon: 'fa-cloud', temp: '23°C' },
                    { date: '明天', icon: 'fa-cloud-sun', temp: '24°C' },
                    { date: '后天', icon: 'fa-sun', temp: '26°C' }
                ]
            },
            'chengdu': {
                temp: '20°C',
                desc: '小雨',
                icon: 'fa-cloud-sun-rain',
                humidity: '85%',
                windSpeed: '1.5 m/s',
                pressure: '1010 hPa',
                visibility: '5 km',
                forecast: [
                    { date: '今天', icon: 'fa-cloud-sun-rain', temp: '20°C' },
                    { date: '明天', icon: 'fa-cloud-sun-rain', temp: '19°C' },
                    { date: '后天', icon: 'fa-cloud', temp: '21°C' }
                ]
            },
            'beijing': {
                temp: '28°C',
                desc: '晴转多云',
                icon: 'fa-cloud-sun',
                humidity: '45%',
                windSpeed: '4.2 m/s',
                pressure: '1018 hPa',
                visibility: '12 km',
                forecast: [
                    { date: '今天', icon: 'fa-cloud-sun', temp: '28°C' },
                    { date: '明天', icon: 'fa-sun', temp: '30°C' },
                    { date: '后天', icon: 'fa-cloud', temp: '27°C' }
                ]
            },
            'shanghai': {
                temp: '26°C',
                desc: '多云转晴',
                icon: 'fa-cloud-sun',
                humidity: '60%',
                windSpeed: '3.0 m/s',
                pressure: '1014 hPa',
                visibility: '9 km',
                forecast: [
                    { date: '今天', icon: 'fa-cloud-sun', temp: '26°C' },
                    { date: '明天', icon: 'fa-sun', temp: '28°C' },
                    { date: '后天', icon: 'fa-sun', temp: '29°C' }
                ]
            }
        };
        
        return weatherDatabase[location] || weatherDatabase['meizhou'];
    }
    
    /**
     * 更新天气UI
     * @param {Object} weatherData - 天气数据
     */
    function updateWeatherUI(weatherData) {
        // 更新主要天气信息
        const weatherIcon = document.querySelector('.weather-icon i');
        const weatherTemp = document.querySelector('.weather-temp');
        const weatherDesc = document.querySelector('.weather-desc');
        
        if (weatherIcon && weatherTemp && weatherDesc) {
            // 移除旧图标类
            weatherIcon.className = '';
            // 添加新图标类
            weatherIcon.className = `fas ${weatherData.icon}`;
            // 更新温度和描述
            weatherTemp.textContent = weatherData.temp;
            weatherDesc.textContent = weatherData.desc;
        }
        
        // 更新天气详情
        const detailLabels = document.querySelectorAll('.weather-detail-label');
        const detailValues = document.querySelectorAll('.weather-detail-value');
        
        if (detailLabels.length >= 4 && detailValues.length >= 4) {
            detailValues[0].textContent = weatherData.humidity;
            detailValues[1].textContent = weatherData.windSpeed;
            detailValues[2].textContent = weatherData.pressure;
            detailValues[3].textContent = weatherData.visibility;
        }
        
        // 更新天气预报
        const forecastDays = document.querySelectorAll('.forecast-day');
        
        weatherData.forecast.forEach((forecast, index) => {
            if (forecastDays[index]) {
                const dateEl = forecastDays[index].querySelector('.forecast-date');
                const iconEl = forecastDays[index].querySelector('.forecast-icon i');
                const tempEl = forecastDays[index].querySelector('.forecast-temp');
                
                if (dateEl && iconEl && tempEl) {
                    dateEl.textContent = forecast.date;
                    iconEl.className = '';
                    iconEl.className = `fas ${forecast.icon}`;
                    tempEl.textContent = forecast.temp;
                }
            }
        });
    }
    
    /**
     * 添加天气动画效果
     */
    function addWeatherAnimation() {
        const widget = document.querySelector('.weather-widget');
        
        // 添加悬停效果
        widget.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
        });
        
        widget.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
        });
        
        // 添加过渡效果
        widget.style.transition = 'transform 0.3s ease, box-shadow 0.3s ease';
    }
</script>